<div class="container">
  <h1 class="text-center">All Budget Calculations</h1>
  <br/>

  <form>
    <div class="col-md-12">
      <div class="form-group pull-right">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Search Forms" ng-model="budgetListCtrl.searchForms">
        </div>
      </div>
    </div>
  </form>

  <table ng-if="budgetListCtrl.listOfBudgets.length > 0" class="table table-striped table-condensed crud-datatable"
         infinite-scroll="budgetListCtrl.getNextBudgetPage()"
         infinite-scroll-distance="3">
    <thead>
      <tr>
        <th class="text-center" ng-click="sortType = 'border_station.station_name'; sortReverse = !sortReverse">Station
        <i class="glyphicon"
              ng-show="sortType === 'border_station.station_name'"
              ng-class="{'glyphicon-sort-by-attributes-alt': sortReverse, 'glyphicon-sort-by-attributes': !sortReverse}">
        </i>
        </th>
        <th class="text-center" ng-click="sortType = 'border_station.station_code'; sortReverse = !sortReverse">Station Code
        <i class="glyphicon"
              ng-show="sortType === 'border_station.station_code'"
              ng-class="{'glyphicon-sort-by-attributes-alt': sortReverse, 'glyphicon-sort-by-attributes': !sortReverse}">
        </i>
        </th>
        <th class="text-center" ng-click="sortType = 'month_year'; sortReverse = !sortReverse">Budget For
        <i class="glyphicon"
              ng-show="sortType === 'month_year'"
              ng-class="{'glyphicon-sort-by-attributes-alt': sortReverse, 'glyphicon-sort-by-attributes': !sortReverse}">
        </i>
        </th>
        <th class="text-center" ng-click="sortType = 'date_time_entered'; sortReverse = !sortReverse">Date Entered
        <i class="glyphicon"
              ng-show="sortType === 'date_time_entered'"
              ng-class="{'glyphicon-sort-by-attributes-alt': sortReverse, 'glyphicon-sort-by-attributes': !sortReverse}">
        </i>
        </th>
        <th class="text-center" ng-click="sortType = 'date_time_last_updated'; sortReverse = !sortReverse">Last Updated
        <i class="glyphicon"
              ng-show="sortType === 'date_time_last_updated'"
              ng-class="{'glyphicon-sort-by-attributes-alt': sortReverse, 'glyphicon-sort-by-attributes': !sortReverse}">
        </i>
        </th>
        <th class="text-center">&nbsp;</th>
      </tr>
    </thead>
    <tbody class="text-center"
           ng-init="sortType = 'month_year'">
      <tr ng-repeat="form in budgetListCtrl.listOfBudgets | orderBy:sortType:sortReverse | filter:budgetListCtrl.searchForms"
          ng-mouseenter="form.hover = true"
          ng-mouseleave="form.hover = false; form.budgetRemoved = false">
        <td>{{ form.border_station.station_name }}</td>
        <td>{{ form.border_station.station_code }}</td>
        <td>{{ form.month_year }}</td>
        <td>{{ form.date_time_entered }}</td>
        <td>{{ form.date_time_last_updated }}</td>
        <td>
          <a ui-sref="budget({id:form.id, isViewing:true})" class="btn btn-sm btn-primary">View</a>
          <a ui-sref="budget({id:form.id})" class="btn btn-sm btn-primary">Edit</a>
          <a ui-sref="#" class="btn btn-sm btn-primary">Resend MDF</a>

          <button ng-if="budgetListCtrl.session.user.permission_border_stations_delete"
                  class="btn btn-sm btn-danger animated"
                  ng-click="budgetListCtrl.removeBudget(budgetListCtrl.listOfBudgets, form)"
                  ng-class="{fadeIn: form.hover && !form.budgetRemoved, fadeOut: !form.hover, pulse: form.budgetRemoved}">
            {{ form.budgetRemoved ? "Are you sure?" : "Remove Budget" }}
          </button>
        </td>
      </tr>
    </tbody>
  </table>


  <div ng-if="budgetListCtrl.listOfBudgets.length == 0" class="row text-center">
    <h3>There are no saved Budget Sheets in the system</h3>
    <h4>To add one, go to the detail page of a border station, and click the New Budget Calculation Form</h4>
  </div>

</div>