<div class="navbar navbar-default navbar-fixed-top" ng-if="!navbarCtrl.state.current.data.hideNavbar">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-header-collapse"
            ng-click="mobileNavClosed = !mobileNavClosed" ng-init="mobileNavClosed = true">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" style="margin-top: -10px" href="#" ui-sref="dashboard">
            <img ng-src="assets/images/searchlight_full.png" alt="Searchlight" />
        </a>
    </div>

    <div ng-class="{'collapse': mobileNavClosed, 'navbar-collapse': mobileNavClosed, 'navbar-header-collapse': mobileNavClosed}"
        ng-if="authenticated">
        <ul class="nav navbar-nav" ng-mouseleave="stationsOpen = false; formsOpen = false">

			<!-- START: FORMS -->

            <li class="dropdown" ng-class="{open:formsOpen}"
                ng-hide="!navbarCtrl.showForms()"
                ng-mouseleave="formsOpen = false">
                <a class="dropdown-toggle" data-toggle="dropdown" ng-click="formsOpen=!formsOpen">Forms
                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    <li>
                        <a ng-show="navbarCtrl.session.checkPermission('IRF','VIEW',null, null)"
                            ng-href="{{ navbarCtrl.getReactUrl('irf/search?status=!invalid') }}"
                            ng-click="navbarCtrl.trackButtonClick('IRFs')">IRFs</a>
                    </li>
                    <li>
                        <a ng-show="navbarCtrl.session.checkPermission('PVF','VIEW',null, null)"
                            ng-href="{{ navbarCtrl.getReactUrl('pvf/search') }}"
                            ng-click="navbarCtrl.trackButtonClick('PVFs')">PVFs</a>
                    </li>
                    <li>
                        <a ng-show="navbarCtrl.session.checkPermission('SF','VIEW',null, null)"
                            ng-href="{{ navbarCtrl.getReactUrl('sf/search') }}"
                            ng-click="navbarCtrl.trackButtonClick('SFs')">SFs</a>
                    </li>
                    <li>
                        <a ng-show="navbarCtrl.session.checkPermission('LF','VIEW',null, null)"
                            ng-href="{{ navbarCtrl.getReactUrl('lf/search') }}"
                            ng-click="navbarCtrl.trackButtonClick('LFs')">LFs</a>
                    </li>
                    <li>
                        <a ng-show="navbarCtrl.session.checkPermission('EMP','VIEW',null, null);"
                            ng-href="{{ navbarCtrl.getReactUrl('emp/search') }}"
                            ng-click="navbarCtrl.trackButtonClick('Emps')">Emps</a>
                    </li>
                    <li>
                        <a ng-show="navbarCtrl.session.checkPermission('GSP','VIEW',null, null);"
                            ng-href="{{ navbarCtrl.getReactUrl('gsp/search') }}"
                            ng-click="navbarCtrl.trackButtonClick('Gsps')">Gsps</a>
                    </li>
                    <li>
                        <a ng-show="navbarCtrl.session.checkPermission('MONTHLY_REPORT','VIEW',null, null)"
                            ui-sref="monthlyReportList"
                            ng-click="navbarCtrl.trackButtonClick('SMRs')">SMRs</a>

                    </li>
                </ul>
            </li>
            <!-- END: FORMS -->
            
            <!-- START: Projects -->
			<li class="dropdown" ng-class="{open:projectsOpen}" ng-if="navbarCtrl.session.checkPermission('PROJECTS','VIEW',null, null)||navbarCtrl.session.checkPermission('PROJECT_STATISTICS','VIEW',null, null)"
                ng-mouseleave="projectsOpen = false">
                <a class="dropdown-toggle" data-toggle="dropdown" ng-click="projectsOpen=!projectsOpen">Projects
                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                	<li>
                       	<a ng-show="navbarCtrl.session.checkPermission('PROJECTS','VIEW',null, null)"
                           ui-sref="projectList"
                            ng-click="navbarCtrl.trackButtonClick('Project List')">Project List</a>
               		</li>
               		<li>
                        <a ng-show="navbarCtrl.session.checkPermission('PROJECT_STATISTICS','VIEW',null, null)"
                        	ui-sref="operationsDashboard"
                            ng-click="navbarCtrl.trackButtonClick('Projects Dashboard')">Dashboard</a>
                    </li>
                    <li>
                        <a ng-show="navbarCtrl.session.checkPermission('PROJECT_STATISTICS','VIEW',null, null)"
                        	ui-sref="stationData"
                            ng-click="navbarCtrl.trackButtonClick('Project Data')">Project Data</a>
                    </li>
                    <li>
                        <a ng-show="navbarCtrl.session.checkPermission('PROJECT_STATISTICS','VIEW',null, null)"
                        	ui-sref="locationData"
                            ng-click="navbarCtrl.trackButtonClick('Location Data')">Location Data</a>
                    </li>
                    <li>
                        <a ng-show="navbarCtrl.session.checkPermission('PROJECT_STATISTICS','VIEW',null, null)"
                        	ui-sref="locationStaff"
                            ng-click="navbarCtrl.trackButtonClick('Location Staffing')">Location Staffing</a>
                    </li>
                </ul>
            </li>
            <!-- END: Projects -->
            
            <!-- START: Staff/SC -->
			<li class="dropdown" ng-class="{open:staffOpen}" ng-if="navbarCtrl.session.checkPermission('STAFF','VIEW_BASIC',null, null)"
                ng-mouseleave="staffOpen = false">
                <a class="dropdown-toggle" data-toggle="dropdown" ng-click="staffOpen=!staffOpen">Staff/SC
                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                	<li>
                    	<a ng-show="navbarCtrl.session.checkPermission('STAFF','VIEW_BASIC',null, null)"
                           ng-href="{{ navbarCtrl.getReactUrl('staff/search') }}"
                           ng-click="navbarCtrl.trackButtonClick('Staff')">Staff</a>
                    </li>
                	<li>
                    	<a ng-show="navbarCtrl.session.checkPermission('SUBCOMMITTEE','VIEW_BASIC',null, null)"
                           ui-sref="subcommitteeList"
                           ng-click="navbarCtrl.trackButtonClick('Staff')">Subcommittee</a>
                    </li>
                </ul>
            </li>
            <!-- END: Staff/SC -->
            
            <!-- START: Budget -->
			<li class="dropdown" ng-class="{open:budgetOpen}" ng-if="navbarCtrl.session.checkPermission('PROJECT_REQUEST','VIEW',null, null)||navbarCtrl.session.checkPermission('MDF','VIEW',null, null)"
                ng-mouseleave="budgetOpen = false">
                <a class="dropdown-toggle" data-toggle="dropdown" ng-click="budgetOpen=!budgetOpen">Budget
                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                	<li>
                        <a ng-show="navbarCtrl.session.checkPermission('PROJECT_REQUEST','VIEW',null, null);"
                            ui-sref="projectRequestList({mdf_id:null})"
                            ng-click="navbarCtrl.trackButtonClick('Project Requests')">Project Request Record</a>
                    </li>
                    <li>
                        <a ng-show="navbarCtrl.session.checkPermission('MDF','VIEW',null, null);"
                            ui-sref="mdfList"
                            ng-click="navbarCtrl.trackButtonClick('MDFs')">Project Budget Sheets</a>
                    </li>
                </ul>
            </li>
            <!-- END: Budget -->
            
            <!-- START: Follow ups -->
			<li class="dropdown" ng-class="{open:followUpsOpen}"
                ng-hide="!navbarCtrl.session.checkPermission('GOSPEL_VERIFICATION','VIEW',null, null)"
                ng-mouseleave="followUpsOpen = false">
                <a class="dropdown-toggle" data-toggle="dropdown" ng-click="followUpsOpen=!followUpsOpen">Follow-ups
                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    <li>
                        <a ng-show="navbarCtrl.session.checkPermission('GOSPEL_VERIFICATION','VIEW',null, null)"
                            ui-sref="gospelVerificationList"
                            ng-click="navbarCtrl.trackButtonClick('Gospel Verification')">Gospel Verification</a>
                    </li>
                </ul>
            </li>
            <!-- END: Follow ups -->
            
            <!-- START: Audits -->
            <li>
            	<a ng-show="navbarCtrl.session.checkPermission('AUDIT','VIEW',null, null)"
                        	ui-sref="auditList"
                            ng-click="navbarCtrl.trackButtonClick('Audits')">Audits</a>
            </li>
            <!-- END: Audits -->
            
            <!-- START: Legal -->
            <li>
                <a ng-show="navbarCtrl.session.checkPermission('LEGAL_CASE','VIEW',null, null);"
                    ui-sref="legalCaseList"
                    ng-click="navbarCtrl.trackButtonClick('Legal')">Legal</a>
            </li>
            <!-- END: Legal -->
           
            <!-- START: REPORTS -->
            <li class="dropdown" ng-class="{open:reportsOpen}"
            	ng-hide="!(navbarCtrl.session.checkPermission('CIF','VIEW',null, null)||navbarCtrl.session.checkPermission('IRF','VIEW',null, null)||navbarCtrl.session.checkPermission('VDF','VIEW',null, null)||navbarCtrl.session.checkPermission('MONTHLY_REPORT','VIEW',null, null))"
                ng-mouseleave="reportsOpen = false">
                <a class="dropdown-toggle" data-toggle="dropdown" ng-click="reportsOpen=!reportsOpen">Data Summaries
                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                	<li>
                        <a ng-show="navbarCtrl.session.checkPermission('CIF','VIEW',null, null)||navbarCtrl.session.checkPermission('IRF','VIEW',null, null)||navbarCtrl.session.checkPermission('VDF','VIEW',null, null)"
                        	ui-sref="collectionIndicators"
                            ng-click="navbarCtrl.trackButtonClick('Data Collection Indicators')">Data Collection Indicators</a>
                    </li>
                    <li>
                        <a ng-show="navbarCtrl.session.checkPermission('CIF','VIEW',null, null)||navbarCtrl.session.checkPermission('IRF','VIEW',null, null)||navbarCtrl.session.checkPermission('VDF','VIEW',null, null)"
                        	ui-sref="indicators"
                            ng-click="navbarCtrl.trackButtonClick('Data Entry Indicators')">Data Entry Indicators</a>
                    </li>
                    <li>
                    	<a ng-show="navbarCtrl.session.checkPermission('MONTHLY_REPORT','VIEW',null, null)"
                    		ui-sref="monthlyReportSummary"
                            ng-click="navbarCtrl.trackButtonClick('SMR Summary')">SMR Summary</a>
                    </li>
                </ul>
            </li>
             <!-- END: REPORTS -->
        </ul>
        

        <ul class="nav navbar-nav navbar-right">
            <!-- START: USER SETTINGS -->
            <li class="dropdown" ng-class="{open:menuOpen}" ng-mouseleave="menuOpen = false">
                <a class="dropdown-toggle" data-toggle="dropdown" ng-click="menuOpen=!menuOpen">
                <img ng-src="assets/images/menu-alt.png" hspace="20">
                </a>
                <ul class="dropdown-menu">
                    <li>
                        <a href="#" ng-show="navbarCtrl.session.user.permission_accounts_manage"
                            ui-sref="accounts.list"
                            ng-click="navbarCtrl.trackButtonClick('Accounts & Permissions')">Accounts & Permissions</a>
                    </li>
                    <li>
                        <a ui-sref="countries"
                            ng-click="navbarCtrl.trackButtonClick('Countries')">Countries</a>
                    </li>
                    <li>
                        <a ui-sref="personManagementList"
                            ng-show="navbarCtrl.session.checkPermission('PERSON_MANAGEMENT','EDIT',null, null)"
                            ng-click="navbarCtrl.trackButtonClick('Person Management')">Person Management</a>
                    </li>
                    <li>
                        <a ui-sref="traffickermatch"
                           ng-show="navbarCtrl.session.user.permission_person_match"
                            ng-click="navbarCtrl.trackButtonClick('Person Match')">Person Match</a>
                    </li>
                    <li>
                        <a ui-sref="helpvideo"
                            ng-click="navbarCtrl.trackButtonClick('Help Videos')">Help Videos</a>
                    </li>
                    <li class="divider"></li>
                    <li ng-click="navbarCtrl.logout()">
                        <a href="#"
                            ng-click="navbarCtrl.trackButtonClick('Logout')">Logout</a>
                    </li>
                </ul>
            </li>
            <!-- END: USER SETTINGS -->
        </ul>
    </div>
</div>