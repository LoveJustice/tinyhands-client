<div class="container">
  <h1 class="text-center">All Budget Calculations</h1>
  <br/>

  <table ng-if="budgetListCtrl.listOfBudgets.length > 0" class="table table-striped table-condensed crud-datatable">
    <thead>
      <tr>
        <th class="text-center" ng-click="sortType = 'border_station.station_name'; sortReverse = !sortReverse;">Station</th>
        <span ng-show="sortType == 'border_station.station_name'"
              ng-class="sortReverse ? 'glyphicon glyphicon-sort-by-attributes-alt' : 'glyphicon glyphicon-sort-by-attributes'"
              ng-click="sortReverse = !sortReverse">
        </span>
        <th class="text-center" ng-click="sortType = 'border_station.station_code'">Station Code</th>
        <span ng-show="sortType == 'border_station.station_code'"
              ng-class="sortReverse ? 'glyphicon glyphicon-sort-by-attributes-alt' : 'glyphicon glyphicon-sort-by-attributes'"
              ng-click="sortReverse = !sortReverse">
        </span>
        <th class="text-center" ng-click="sortType = 'month_year'">Budget For</th>
        <span ng-show="sortType == 'month_year'"
              ng-class="sortReverse ? 'glyphicon glyphicon-sort-by-attributes-alt' : 'glyphicon glyphicon-sort-by-attributes'"
              ng-click="sortReverse = !sortReverse">
        </span>
        <th class="text-center" ng-click="sortType = 'date_time_entered'">Date Entered</th>
        <span ng-show="sortType == 'date_time_entered'"
              ng-class="sortReverse ? 'glyphicon glyphicon-sort-by-attributes-alt' : 'glyphicon glyphicon-sort-by-attributes'"
              ng-click="sortReverse = !sortReverse">
        </span>
        <th class="text-center" ng-click="sortType = 'date_time_last_updated'">Last Updated</th>
        <span ng-show="sortType == 'date_time_last_updated'"
              ng-class="sortReverse ? 'glyphicon glyphicon-sort-by-attributes-alt' : 'glyphicon glyphicon-sort-by-attributes'"
              ng-click="sortReverse = !sortReverse">
        </span>
        <th class="text-center">&nbsp;</th>
      </tr>
    </thead>
    <tbody class="text-center">
      <tr ng-repeat="form in budgetListCtrl.listOfBudgets | orderBy:sortType:sortReverse"
          ng-mouseenter="form.hover = true"
          ng-mouseleave="form.hover = false; form.budgetRemoved = false">
        <td>{{ form.border_station.station_name }}</td>
        <td>{{ form.border_station.station_code }}</td>
        <td>{{ form.month_year | date:'MMMM, yyyy'}}</td>
        <td>{{ form.date_time_entered | date:"MMM, dd yyyy 'at' h:mm a" }}</td>
        <td>{{ form.date_time_last_updated | date:"MMM, dd yyyy 'at' h:mm a"}}</td>
        <td>
          <a ui-sref="budget({id:form.id})" class="btn btn-sm btn-primary">View</a>
          <a ui-sref="budget({id:form.id})" class="btn btn-sm btn-primary">Edit</a>
          <a ui-sref="#" class="btn btn-sm btn-primary">Resend MDF</a>

          <button ng-if="budgetListCtrl.session.user.permission_border_stations_delete"
                  class="btn btn-sm btn-danger animated"
                  ng-click="budgetListCtrl.removeBudget(budgetListCtrl.listOfBudgets, form)"
                  ng-class="{fadeIn: form.hover && !form.budgetRemoved, fadeOut: !form.hover, pulse: form.budgetRemoved}">
            {{ form.budgetRemoved ? "Are you sure?" : "Remove Budget" }}
          </button>
        </td>
      </tr>
    </tbody>
  </table>


  <div ng-if="budgetListCtrl.listOfBudgets.length == 0" class="row text-center">
    <h3>There are no saved Budget Sheets in the system</h3>
    <h4>To add one, go to the detail page of a border station, and click the New Budget Calculation Form</h4>
  </div>

</div>